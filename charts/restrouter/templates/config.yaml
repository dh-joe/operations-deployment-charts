{{- define "config.app" -}}
# Number of worker processes to spawn.
# Set to 0 to run everything in a single process without clustering.
# Use 'ncpu' to run as many workers as there are CPU units
num_workers: 2

# Number of workers to start in parallel after the first worker.
# The first worker is always started independently. After it has completed
# its start-up, this number controls the number of workers to start in
# parallel until `num_workers` have been started. Note that setting this
# number to a too high a value might lead to high resource consumption
# (especially of CPU) during the start-up process.
startup_concurrency: 8

# Log error messages and gracefully restart a worker if v8 reports that it
# uses more heap (note: not RSS) than this many mb.
worker_heap_limit_mb: 700

# The maximum interval in ms that can pass between two beat messages
# sent by each worker to the master before it is killed.
worker_heartbeat_timeout: 7500

# Tell service-runner where the root dir of the service is
app_base_path: /srv/service

# Logger info
logging:
  level: warn
  name: restrouter
  streams:
    - type: stdout
    - type: gelf
      host: logstash.svc.eqiad.wmnet
      port: 12201
  sampled_levels:
    # Target is about 1 request logged per minute @1000 req/s
    debug/request: 0.00005
    # Not sure what the rate of these is, so start conservatively.
    debug/request/slow: 0.001
    debug/api_error: 0.01

{{- if .Values.monitoring.enabled }}
# Statsd metrics reporter
metrics:
  name: restrouter
  host: localhost
  port: 9125
  type: statsd
  batch: true
{{- end }}

# Rate limiter
#
ratelimiter:
  type: kademlia
  seeds: [{{ template "wmf.releasename" . }}-kademlia.{{ .Release.Namespace }}.svc.cluster.local]
  listen:
    address: 0.0.0.0
    port: {{ .Values.main_app.kademlia_port }}

# load & parametrise project templates. These are referenced / shared
# between domains in the root_spec further down.
default_project: &default_project
  x-modules:
    - spec:
        paths:
          /{api:v1}:
            x-modules:
              - path: projects/v1/default.wmf.yaml
                options: &default_options
                  parsoid:
                    host: {{ .Values.main_app.parsoid_uri }}
                    grace_ttl: 86400
                    stash_ratelimit: 5
                  action:
                    apiUriTemplate: {{ .Values.main_app.mwapi_uri }}
                    baseUriTemplate: "{{ "{{" }}'https://{{ "{{" }}domain{{ "}}" }}/api/rest_v1'{{ "}}" }}"
                  graphoid:
                    host: {{ .Values.main_app.graphoid_uri }}
                  mathoid: &mathoid_options
                    host: {{ .Values.main_app.mathoid_uri }}
                    # 10 days Varnish caching, one day client-side
                    cache-control: s-maxage=864000, max-age=86400
                  mobileapps:
                    host: {{ .Values.main_app.mobileapps_uri }}
                  wikifeeds:
                    host: {{ .Values.main_app.wikifeeds_uri }}
                  citoid:
                    host: {{ .Values.main_app.citoid_uri }}
                  recommendation: &recommendation_options
                    host: {{ .Values.main_app.recommendation_uri }}
                  events: &events_options
                    uri: {{ .Values.main_app.event_service_uri }}
                    topic: resource_change
                    transcludes_topic: change-prop.transcludes.resource-change
                  summary:
                    host: {{ .Values.main_app.mobileapps_uri }}
                    implementation: mcs
                    protocol: https
                  related:
                    cache_control: s-maxage=86400, max-age=3600
                  # Cache headers for purged end points.
                  purged_cache_control: s-maxage=1209600, max-age=0, must-revalidate
                  # Cache control for purged endpoints allowing short-term client caching
                  purged_cache_control_client_cache: s-maxage=1209600, max-age=300
                  skip_updates: false
                  pdf:
                    cache_control: s-maxage=600, max-age=600
                    uri: {{ .Values.main_app.proton_uri }}
                  transform:
                    cx_host: {{ .Values.main_app.cxserver_uri }}
          /{api:sys}: &default_sys
            x-modules:
              - path: projects/sys/default.wmf.yaml
                options: *default_options
              - path: projects/proxy.yaml
                options: &proxy_options
                  backend_host_template: "{{ "{{" }}'{{ .Values.main_app.restbase_uri }}/{domain}/v1'{{ "}}" }}"
                  block_external_reqs: false

wikimedia_project: &wikimedia_project
  x-modules:
    - spec:
        paths:
          /{api:v1}:
            x-modules:
              - path: projects/v1/wikimedia.wmf.yaml
                options:
                  <<: *default_options
                  pageviews:
                    host: {{ .Values.main_app.aqs_uri }}
          /{api:sys}:
            x-modules:
              - path: projects/proxy.yaml
                options: *proxy_options
              - spec:
                  paths:
                    /mathoid:
                      x-modules:
                        - path: sys/mathoid.js
                          options: *mathoid_options
                    /post_data:
                      x-modules:
                        - path: sys/post_data.js
                    /events:
                      x-modules:
                        - path: sys/events.js
                          options: *events_options

wikipedia_project: &wikipedia_project
  x-modules:
    - spec:
        paths:
          /{api:v1}:
            x-modules:
              - path: projects/v1/wikipedia.wmf.yaml
                options: *default_options
          /{api:sys}: *default_sys

wiktionary_project: &wiktionary_project
  x-modules:
    - spec:
        paths:
          /{api:v1}:
            x-modules:
              - path: projects/v1/wiktionary.wmf.yaml
                options: *default_options
          /{api:sys}: *default_sys

wikidata_project: &wikidata_project
  x-modules:
    - spec:
        paths:
          /{api:v1}:
            x-modules:
              - path: projects/v1/wikidata.wmf.yaml
                options: *default_options
          /{api:sys}: *default_sys

wikivoyage_project: &wikivoyage_project
  x-modules:
    - spec:
        paths:
          /{api:v1}:
            x-modules:
              - path: projects/v1/wikivoyage.wmf.yaml
                options: *default_options
          /{api:sys}: *default_sys

commons_project: &commons_project
  x-modules:
    - spec:
        paths:
          /{api:v1}:
            x-modules:
              - path: projects/v1/default.wmf.yaml
                options: *default_options
              - spec:
                   paths:
                     /data:
                       x-modules:
                         - path: v1/recommend-caption.yaml
                           options: *recommendation_options
          /{api:sys}: *default_sys

# Swagger spec root.
root_spec: &root_spec
  title: "The RESTRouter root"
  # Some more general RESTBase info
  x-request-filters:
    - path: lib/security_response_header_filter.js
  x-sub-request-filters:
    - type: default
      name: http
      options:
        allow:
          - pattern: {{ .Values.main_app.mwapi_uri }}
            forward_headers: true
          - pattern: {{ .Values.main_app.restbase_uri }}
            forward_headers: true
          - pattern: {{ .Values.main_app.parsoid_uri }}
            forward_headers: true
          - pattern: {{ .Values.main_app.aqs_uri }}
            forward_headers:
                x-client-ip: true
                user-agent: true
          - pattern: /^https?:\/\//
  paths:

    # Wikiquote
    /{domain:fa.wikiquote.org}: *default_project
    /{domain:is.wikiquote.org}: *default_project
    /{domain:bg.wikiquote.org}: *default_project
    /{domain:br.wikiquote.org}: *default_project
    /{domain:fr.wikiquote.org}: *default_project
    /{domain:hi.wikiquote.org}: *default_project
    /{domain:fi.wikiquote.org}: *default_project
    /{domain:cy.wikiquote.org}: *default_project
    /{domain:es.wikiquote.org}: *default_project
    /{domain:la.wikiquote.org}: *default_project
    /{domain:ja.wikiquote.org}: *default_project
    /{domain:ml.wikiquote.org}: *default_project
    /{domain:ku.wikiquote.org}: *default_project
    /{domain:el.wikiquote.org}: *default_project
    /{domain:mr.wikiquote.org}: *default_project
    /{domain:kn.wikiquote.org}: *default_project
    /{domain:ky.wikiquote.org}: *default_project
    /{domain:nl.wikiquote.org}: *default_project
    /{domain:sv.wikiquote.org}: *default_project
    /{domain:pl.wikiquote.org}: *default_project
    /{domain:sa.wikiquote.org}: *default_project
    /{domain:vi.wikiquote.org}: *default_project
    /{domain:gu.wikiquote.org}: *default_project
    /{domain:az.wikiquote.org}: *default_project
    /{domain:ar.wikiquote.org}: *default_project
    /{domain:hr.wikiquote.org}: *default_project
    /{domain:pt.wikiquote.org}: *default_project
    /{domain:uz.wikiquote.org}: *default_project
    /{domain:sq.wikiquote.org}: *default_project
    /{domain:eu.wikiquote.org}: *default_project
    /{domain:th.wikiquote.org}: *default_project
    /{domain:he.wikiquote.org}: *default_project
    /{domain:ro.wikiquote.org}: *default_project
    /{domain:be.wikiquote.org}: *default_project
    /{domain:li.wikiquote.org}: *default_project
    /{domain:af.wikiquote.org}: *default_project
    /{domain:ca.wikiquote.org}: *default_project
    /{domain:hy.wikiquote.org}: *default_project
    /{domain:bs.wikiquote.org}: *default_project
    /{domain:da.wikiquote.org}: *default_project
    /{domain:zh.wikiquote.org}: *default_project
    /{domain:hu.wikiquote.org}: *default_project
    /{domain:sr.wikiquote.org}: *default_project
    /{domain:uk.wikiquote.org}: *default_project
    /{domain:ka.wikiquote.org}: *default_project
    /{domain:su.wikiquote.org}: *default_project
    /{domain:sl.wikiquote.org}: *default_project
    /{domain:ko.wikiquote.org}: *default_project
    /{domain:ur.wikiquote.org}: *default_project
    /{domain:lt.wikiquote.org}: *default_project
    /{domain:en.wikiquote.org}: *default_project
    /{domain:ta.wikiquote.org}: *default_project
    /{domain:eo.wikiquote.org}: *default_project
    /{domain:sah.wikiquote.org}: *default_project
    /{domain:ru.wikiquote.org}: *default_project
    /{domain:no.wikiquote.org}: *default_project
    /{domain:it.wikiquote.org}: *default_project
    /{domain:wo.wikiquote.org}: *default_project
    /{domain:et.wikiquote.org}: *default_project
    /{domain:nn.wikiquote.org}: *default_project
    /{domain:gl.wikiquote.org}: *default_project
    /{domain:id.wikiquote.org}: *default_project
    /{domain:cs.wikiquote.org}: *default_project
    /{domain:te.wikiquote.org}: *default_project
    /{domain:sk.wikiquote.org}: *default_project
    /{domain:tr.wikiquote.org}: *default_project
    /{domain:de.wikiquote.org}: *default_project

    # Wikinews
    /{domain:es.wikinews.org}: *default_project
    /{domain:li.wikinews.org}: *default_project
    /{domain:fr.wikinews.org}: *default_project
    /{domain:ja.wikinews.org}: *default_project
    /{domain:bg.wikinews.org}: *default_project
    /{domain:uk.wikinews.org}: *default_project
    /{domain:no.wikinews.org}: *default_project
    /{domain:eo.wikinews.org}: *default_project
    /{domain:sr.wikinews.org}: *default_project
    /{domain:he.wikinews.org}: *default_project
    /{domain:it.wikinews.org}: *default_project
    /{domain:pt.wikinews.org}: *default_project
    /{domain:ru.wikinews.org}: *default_project
    /{domain:zh.wikinews.org}: *default_project
    /{domain:bs.wikinews.org}: *default_project
    /{domain:sq.wikinews.org}: *default_project
    /{domain:de.wikinews.org}: *default_project
    /{domain:pl.wikinews.org}: *default_project
    /{domain:fi.wikinews.org}: *default_project
    /{domain:fa.wikinews.org}: *default_project
    /{domain:en.wikinews.org}: *default_project
    /{domain:tr.wikinews.org}: *default_project
    /{domain:cs.wikinews.org}: *default_project
    /{domain:ro.wikinews.org}: *default_project
    /{domain:ko.wikinews.org}: *default_project
    /{domain:ta.wikinews.org}: *default_project
    /{domain:sv.wikinews.org}: *default_project
    /{domain:ar.wikinews.org}: *default_project
    /{domain:el.wikinews.org}: *default_project
    /{domain:nl.wikinews.org}: *default_project
    /{domain:ca.wikinews.org}: *default_project

    # Wikimedia
    /{domain:mx.wikimedia.org}: *default_project
    /{domain:login.wikimedia.org}: *default_project
    /{domain:ua.wikimedia.org}: *default_project
    /{domain:ar.wikimedia.org}: *default_project
    /{domain:cn.wikimedia.org}: *default_project
    /{domain:fi.wikimedia.org}: *default_project
    /{domain:wikimania2018.wikimedia.org}: *default_project
    /{domain:be.wikimedia.org}: *default_project
    /{domain:donate.wikimedia.org}: *default_project
    /{domain:wikitech.wikimedia.org}: *default_project
    /{domain:wikimania2016.wikimedia.org}: *default_project
    /{domain:no.wikimedia.org}: *default_project
    /{domain:id.wikimedia.org}: *default_project
    /{domain:rs.wikimedia.org}: *default_project
    /{domain:bd.wikimedia.org}: *default_project
    /{domain:br.wikimedia.org}: *default_project
    /{domain:am.wikimedia.org}: *default_project
    /{domain:commons.wikimedia.org}: *commons_project
    /{domain:se.wikimedia.org}: *default_project
    /{domain:dk.wikimedia.org}: *default_project
    /{domain:outreach.wikimedia.org}: *default_project
    /{domain:species.wikimedia.org}: *default_project
    /{domain:mk.wikimedia.org}: *default_project
    /{domain:incubator.wikimedia.org}: *default_project
    /{domain:wikimania2017.wikimedia.org}: *default_project
    /{domain:co.wikimedia.org}: *default_project
    /{domain:et.wikimedia.org}: *default_project
    /{domain:fixcopyright.wikimedia.org}: *default_project
    /{domain:tr.wikimedia.org}: *default_project
    /{domain:foundation.wikimedia.org}: *default_project
    /{domain:pt.wikimedia.org}: *default_project
    /{domain:wikimania.wikimedia.org}: *default_project
    /{domain:nyc.wikimedia.org}: *default_project
    /{domain:punjabi.wikimedia.org}: *default_project
    /{domain:wikimania2014.wikimedia.org}: *default_project
    /{domain:wikimania2015.wikimedia.org}: *default_project
    /{domain:nl.wikimedia.org}: *default_project
    /{domain:ca.wikimedia.org}: *default_project
    /{domain:ru.wikimedia.org}: *default_project
    /{domain:pl.wikimedia.org}: *default_project
    /{domain:ee.wikimedia.org}: *default_project
    /{domain:vote.wikimedia.org}: *default_project
    /{domain:meta.wikimedia.org}: *default_project
    /{domain:test-commons.wikimedia.org}: *commons_project

    # Wiktionary
    /{domain:tr.wiktionary.org}: *wiktionary_project
    /{domain:ro.wiktionary.org}: *wiktionary_project
    /{domain:fr.wiktionary.org}: *wiktionary_project
    /{domain:ie.wiktionary.org}: *wiktionary_project
    /{domain:km.wiktionary.org}: *wiktionary_project
    /{domain:sr.wiktionary.org}: *wiktionary_project
    /{domain:si.wiktionary.org}: *wiktionary_project
    /{domain:lt.wiktionary.org}: *wiktionary_project
    /{domain:ts.wiktionary.org}: *wiktionary_project
    /{domain:fi.wiktionary.org}: *wiktionary_project
    /{domain:jv.wiktionary.org}: *wiktionary_project
    /{domain:ja.wiktionary.org}: *wiktionary_project
    /{domain:cy.wiktionary.org}: *wiktionary_project
    /{domain:co.wiktionary.org}: *wiktionary_project
    /{domain:es.wiktionary.org}: *wiktionary_project
    /{domain:sh.wiktionary.org}: *wiktionary_project
    /{domain:ms.wiktionary.org}: *wiktionary_project
    /{domain:hsb.wiktionary.org}: *wiktionary_project
    /{domain:be.wiktionary.org}: *wiktionary_project
    /{domain:yue.wiktionary.org}: *wiktionary_project
    /{domain:sq.wiktionary.org}: *wiktionary_project
    /{domain:or.wiktionary.org}: *wiktionary_project
    /{domain:hu.wiktionary.org}: *wiktionary_project
    /{domain:ga.wiktionary.org}: *wiktionary_project
    /{domain:iu.wiktionary.org}: *wiktionary_project
    /{domain:tk.wiktionary.org}: *wiktionary_project
    /{domain:am.wiktionary.org}: *wiktionary_project
    /{domain:zh-min-nan.wiktionary.org}: *wiktionary_project
    /{domain:csb.wiktionary.org}: *wiktionary_project
    /{domain:bg.wiktionary.org}: *wiktionary_project
    /{domain:is.wiktionary.org}: *wiktionary_project
    /{domain:th.wiktionary.org}: *wiktionary_project
    /{domain:de.wiktionary.org}: *wiktionary_project
    /{domain:it.wiktionary.org}: *wiktionary_project
    /{domain:nn.wiktionary.org}: *wiktionary_project
    /{domain:tg.wiktionary.org}: *wiktionary_project
    /{domain:te.wiktionary.org}: *wiktionary_project
    /{domain:kk.wiktionary.org}: *wiktionary_project
    /{domain:tt.wiktionary.org}: *wiktionary_project
    /{domain:ml.wiktionary.org}: *wiktionary_project
    /{domain:ko.wiktionary.org}: *wiktionary_project
    /{domain:qu.wiktionary.org}: *wiktionary_project
    /{domain:ti.wiktionary.org}: *wiktionary_project
    /{domain:ne.wiktionary.org}: *wiktionary_project
    /{domain:dv.wiktionary.org}: *wiktionary_project
    /{domain:ha.wiktionary.org}: *wiktionary_project
    /{domain:ka.wiktionary.org}: *wiktionary_project
    /{domain:su.wiktionary.org}: *wiktionary_project
    /{domain:ps.wiktionary.org}: *wiktionary_project
    /{domain:zh.wiktionary.org}: *wiktionary_project
    /{domain:kl.wiktionary.org}: *wiktionary_project
    /{domain:lv.wiktionary.org}: *wiktionary_project
    /{domain:sw.wiktionary.org}: *wiktionary_project
    /{domain:fo.wiktionary.org}: *wiktionary_project
    /{domain:eo.wiktionary.org}: *wiktionary_project
    /{domain:io.wiktionary.org}: *wiktionary_project
    /{domain:pl.wiktionary.org}: *wiktionary_project
    /{domain:mt.wiktionary.org}: *wiktionary_project
    /{domain:ks.wiktionary.org}: *wiktionary_project
    /{domain:sd.wiktionary.org}: *wiktionary_project
    /{domain:zu.wiktionary.org}: *wiktionary_project
    /{domain:ia.wiktionary.org}: *wiktionary_project
    /{domain:ca.wiktionary.org}: *wiktionary_project
    /{domain:id.wiktionary.org}: *wiktionary_project
    /{domain:fy.wiktionary.org}: *wiktionary_project
    /{domain:pt.wiktionary.org}: *wiktionary_project
    /{domain:el.wiktionary.org}: *wiktionary_project
    /{domain:yi.wiktionary.org}: *wiktionary_project
    /{domain:br.wiktionary.org}: *wiktionary_project
    /{domain:ss.wiktionary.org}: *wiktionary_project
    /{domain:tn.wiktionary.org}: *wiktionary_project
    /{domain:fj.wiktionary.org}: *wiktionary_project
    /{domain:ta.wiktionary.org}: *wiktionary_project
    /{domain:roa-rup.wiktionary.org}: *wiktionary_project
    /{domain:mg.wiktionary.org}: *wiktionary_project
    /{domain:mk.wiktionary.org}: *wiktionary_project
    /{domain:ru.wiktionary.org}: *wiktionary_project
    /{domain:en.wiktionary.org}: *wiktionary_project
    /{domain:ku.wiktionary.org}: *wiktionary_project
    /{domain:bs.wiktionary.org}: *wiktionary_project
    /{domain:simple.wiktionary.org}: *wiktionary_project
    /{domain:ky.wiktionary.org}: *wiktionary_project
    /{domain:mi.wiktionary.org}: *wiktionary_project
    /{domain:he.wiktionary.org}: *wiktionary_project
    /{domain:scn.wiktionary.org}: *wiktionary_project
    /{domain:gu.wiktionary.org}: *wiktionary_project
    /{domain:af.wiktionary.org}: *wiktionary_project
    /{domain:rw.wiktionary.org}: *wiktionary_project
    /{domain:kn.wiktionary.org}: *wiktionary_project
    /{domain:da.wiktionary.org}: *wiktionary_project
    /{domain:lo.wiktionary.org}: *wiktionary_project
    /{domain:ln.wiktionary.org}: *wiktionary_project
    /{domain:tl.wiktionary.org}: *wiktionary_project
    /{domain:lb.wiktionary.org}: *wiktionary_project
    /{domain:sl.wiktionary.org}: *wiktionary_project
    /{domain:gd.wiktionary.org}: *wiktionary_project
    /{domain:gn.wiktionary.org}: *wiktionary_project
    /{domain:cs.wiktionary.org}: *wiktionary_project
    /{domain:gl.wiktionary.org}: *wiktionary_project
    /{domain:et.wiktionary.org}: *wiktionary_project
    /{domain:la.wiktionary.org}: *wiktionary_project
    /{domain:ay.wiktionary.org}: *wiktionary_project
    /{domain:sg.wiktionary.org}: *wiktionary_project
    /{domain:st.wiktionary.org}: *wiktionary_project
    /{domain:tpi.wiktionary.org}: *wiktionary_project
    /{domain:hr.wiktionary.org}: *wiktionary_project
    /{domain:sk.wiktionary.org}: *wiktionary_project
    /{domain:an.wiktionary.org}: *wiktionary_project
    /{domain:pa.wiktionary.org}: *wiktionary_project
    /{domain:chr.wiktionary.org}: *wiktionary_project
    /{domain:kw.wiktionary.org}: *wiktionary_project
    /{domain:so.wiktionary.org}: *wiktionary_project
    /{domain:sa.wiktionary.org}: *wiktionary_project
    /{domain:gv.wiktionary.org}: *wiktionary_project
    /{domain:vo.wiktionary.org}: *wiktionary_project
    /{domain:mn.wiktionary.org}: *wiktionary_project
    /{domain:jbo.wiktionary.org}: *wiktionary_project
    /{domain:hi.wiktionary.org}: *wiktionary_project
    /{domain:ast.wiktionary.org}: *wiktionary_project
    /{domain:wa.wiktionary.org}: *wiktionary_project
    /{domain:om.wiktionary.org}: *wiktionary_project
    /{domain:uz.wiktionary.org}: *wiktionary_project
    /{domain:bn.wiktionary.org}: *wiktionary_project
    /{domain:li.wiktionary.org}: *wiktionary_project
    /{domain:uk.wiktionary.org}: *wiktionary_project
    /{domain:vi.wiktionary.org}: *wiktionary_project
    /{domain:nds.wiktionary.org}: *wiktionary_project
    /{domain:hif.wiktionary.org}: *wiktionary_project
    /{domain:fa.wiktionary.org}: *wiktionary_project
    /{domain:ug.wiktionary.org}: *wiktionary_project
    /{domain:sm.wiktionary.org}: *wiktionary_project
    /{domain:oc.wiktionary.org}: *wiktionary_project
    /{domain:pnb.wiktionary.org}: *wiktionary_project
    /{domain:ang.wiktionary.org}: *wiktionary_project
    /{domain:vec.wiktionary.org}: *wiktionary_project
    /{domain:na.wiktionary.org}: *wiktionary_project
    /{domain:nah.wiktionary.org}: *wiktionary_project
    /{domain:nl.wiktionary.org}: *wiktionary_project
    /{domain:mr.wiktionary.org}: *wiktionary_project
    /{domain:ar.wiktionary.org}: *wiktionary_project
    /{domain:sv.wiktionary.org}: *wiktionary_project
    /{domain:eu.wiktionary.org}: *wiktionary_project
    /{domain:az.wiktionary.org}: *wiktionary_project
    /{domain:no.wiktionary.org}: *wiktionary_project
    /{domain:hy.wiktionary.org}: *wiktionary_project
    /{domain:my.wiktionary.org}: *wiktionary_project
    /{domain:ur.wiktionary.org}: *wiktionary_project
    /{domain:wo.wiktionary.org}: *wiktionary_project

    # Wikipedia
    /{domain:bcl.wikipedia.org}: *wikipedia_project
    /{domain:eml.wikipedia.org}: *wikipedia_project
    /{domain:cdo.wikipedia.org}: *wikipedia_project
    /{domain:ie.wikipedia.org}: *wikipedia_project
    /{domain:kw.wikipedia.org}: *wikipedia_project
    /{domain:ang.wikipedia.org}: *wikipedia_project
    /{domain:ko.wikipedia.org}: *wikipedia_project
    /{domain:nv.wikipedia.org}: *wikipedia_project
    /{domain:ts.wikipedia.org}: *wikipedia_project
    /{domain:roa-tara.wikipedia.org}: *wikipedia_project
    /{domain:arz.wikipedia.org}: *wikipedia_project
    /{domain:rue.wikipedia.org}: *wikipedia_project
    /{domain:ty.wikipedia.org}: *wikipedia_project
    /{domain:vep.wikipedia.org}: *wikipedia_project
    /{domain:fa.wikipedia.org}: *wikipedia_project
    /{domain:bi.wikipedia.org}: *wikipedia_project
    /{domain:sd.wikipedia.org}: *wikipedia_project
    /{domain:uk.wikipedia.org}: *wikipedia_project
    /{domain:bpy.wikipedia.org}: *wikipedia_project
    /{domain:pms.wikipedia.org}: *wikipedia_project
    /{domain:nds.wikipedia.org}: *wikipedia_project
    /{domain:sh.wikipedia.org}: *wikipedia_project
    /{domain:be-tarask.wikipedia.org}: *wikipedia_project
    /{domain:sah.wikipedia.org}: *wikipedia_project
    /{domain:ia.wikipedia.org}: *wikipedia_project
    /{domain:dsb.wikipedia.org}: *wikipedia_project
    /{domain:my.wikipedia.org}: *wikipedia_project
    /{domain:bg.wikipedia.org}: *wikipedia_project
    /{domain:ce.wikipedia.org}: *wikipedia_project
    /{domain:bxr.wikipedia.org}: *wikipedia_project
    /{domain:test.wikipedia.org}: *wikipedia_project
    /{domain:gn.wikipedia.org}: *wikipedia_project
    /{domain:uz.wikipedia.org}: *wikipedia_project
    /{domain:gd.wikipedia.org}: *wikipedia_project
    /{domain:fur.wikipedia.org}: *wikipedia_project
    /{domain:kbp.wikipedia.org}: *wikipedia_project
    /{domain:ilo.wikipedia.org}: *wikipedia_project
    /{domain:rmy.wikipedia.org}: *wikipedia_project
    /{domain:wa.wikipedia.org}: *wikipedia_project
    /{domain:kab.wikipedia.org}: *wikipedia_project
    /{domain:scn.wikipedia.org}: *wikipedia_project
    /{domain:gu.wikipedia.org}: *wikipedia_project
    /{domain:mwl.wikipedia.org}: *wikipedia_project
    /{domain:fo.wikipedia.org}: *wikipedia_project
    /{domain:hif.wikipedia.org}: *wikipedia_project
    /{domain:pih.wikipedia.org}: *wikipedia_project
    /{domain:ht.wikipedia.org}: *wikipedia_project
    /{domain:da.wikipedia.org}: *wikipedia_project
    /{domain:lij.wikipedia.org}: *wikipedia_project
    /{domain:gag.wikipedia.org}: *wikipedia_project
    /{domain:ha.wikipedia.org}: *wikipedia_project
    /{domain:lb.wikipedia.org}: *wikipedia_project
    /{domain:ku.wikipedia.org}: *wikipedia_project
    /{domain:mrj.wikipedia.org}: *wikipedia_project
    /{domain:mk.wikipedia.org}: *wikipedia_project
    /{domain:jv.wikipedia.org}: *wikipedia_project
    /{domain:ky.wikipedia.org}: *wikipedia_project
    /{domain:tk.wikipedia.org}: *wikipedia_project
    /{domain:mt.wikipedia.org}: *wikipedia_project
    /{domain:atj.wikipedia.org}: *wikipedia_project
    /{domain:ceb.wikipedia.org}: *wikipedia_project
    /{domain:de.wikipedia.org}: *wikipedia_project
    /{domain:ga.wikipedia.org}: *wikipedia_project
    /{domain:av.wikipedia.org}: *wikipedia_project
    /{domain:sg.wikipedia.org}: *wikipedia_project
    /{domain:hy.wikipedia.org}: *wikipedia_project
    /{domain:zu.wikipedia.org}: *wikipedia_project
    /{domain:sat.wikipedia.org}: *wikipedia_project
    /{domain:eu.wikipedia.org}: *wikipedia_project
    /{domain:ug.wikipedia.org}: *wikipedia_project
    /{domain:na.wikipedia.org}: *wikipedia_project
    /{domain:azb.wikipedia.org}: *wikipedia_project
    /{domain:srn.wikipedia.org}: *wikipedia_project
    /{domain:csb.wikipedia.org}: *wikipedia_project
    /{domain:an.wikipedia.org}: *wikipedia_project
    /{domain:ca.wikipedia.org}: *wikipedia_project
    /{domain:tg.wikipedia.org}: *wikipedia_project
    /{domain:ro.wikipedia.org}: *wikipedia_project
    /{domain:af.wikipedia.org}: *wikipedia_project
    /{domain:ny.wikipedia.org}: *wikipedia_project
    /{domain:nap.wikipedia.org}: *wikipedia_project
    /{domain:new.wikipedia.org}: *wikipedia_project
    /{domain:gan.wikipedia.org}: *wikipedia_project
    /{domain:as.wikipedia.org}: *wikipedia_project
    /{domain:war.wikipedia.org}: *wikipedia_project
    /{domain:map-bms.wikipedia.org}: *wikipedia_project
    /{domain:en.wikipedia.org}: *wikipedia_project
    /{domain:mhr.wikipedia.org}: *wikipedia_project
    /{domain:zh-min-nan.wikipedia.org}: *wikipedia_project
    /{domain:ace.wikipedia.org}: *wikipedia_project
    /{domain:fi.wikipedia.org}: *wikipedia_project
    /{domain:mai.wikipedia.org}: *wikipedia_project
    /{domain:tyv.wikipedia.org}: *wikipedia_project
    /{domain:rm.wikipedia.org}: *wikipedia_project
    /{domain:simple.wikipedia.org}: *wikipedia_project
    /{domain:hyw.wikipedia.org}: *wikipedia_project
    /{domain:ks.wikipedia.org}: *wikipedia_project
    /{domain:jam.wikipedia.org}: *wikipedia_project
    /{domain:tl.wikipedia.org}: *wikipedia_project
    /{domain:ps.wikipedia.org}: *wikipedia_project
    /{domain:su.wikipedia.org}: *wikipedia_project
    /{domain:vec.wikipedia.org}: *wikipedia_project
    /{domain:krc.wikipedia.org}: *wikipedia_project
    /{domain:fj.wikipedia.org}: *wikipedia_project
    /{domain:xh.wikipedia.org}: *wikipedia_project
    /{domain:kaa.wikipedia.org}: *wikipedia_project
    /{domain:wo.wikipedia.org}: *wikipedia_project
    /{domain:ur.wikipedia.org}: *wikipedia_project
    /{domain:cr.wikipedia.org}: *wikipedia_project
    /{domain:dz.wikipedia.org}: *wikipedia_project
    /{domain:min.wikipedia.org}: *wikipedia_project
    /{domain:nn.wikipedia.org}: *wikipedia_project
    /{domain:om.wikipedia.org}: *wikipedia_project
    /{domain:pfl.wikipedia.org}: *wikipedia_project
    /{domain:mr.wikipedia.org}: *wikipedia_project
    /{domain:pcd.wikipedia.org}: *wikipedia_project
    /{domain:tw.wikipedia.org}: *wikipedia_project
    /{domain:pag.wikipedia.org}: *wikipedia_project
    /{domain:ady.wikipedia.org}: *wikipedia_project
    /{domain:ss.wikipedia.org}: *wikipedia_project
    /{domain:is.wikipedia.org}: *wikipedia_project
    /{domain:sn.wikipedia.org}: *wikipedia_project
    /{domain:szl.wikipedia.org}: *wikipedia_project
    /{domain:to.wikipedia.org}: *wikipedia_project
    /{domain:mi.wikipedia.org}: *wikipedia_project
    /{domain:pl.wikipedia.org}: *wikipedia_project
    /{domain:chy.wikipedia.org}: *wikipedia_project
    /{domain:ak.wikipedia.org}: *wikipedia_project
    /{domain:fy.wikipedia.org}: *wikipedia_project
    /{domain:lad.wikipedia.org}: *wikipedia_project
    /{domain:bat-smg.wikipedia.org}: *wikipedia_project
    /{domain:test2.wikipedia.org}: *wikipedia_project
    /{domain:or.wikipedia.org}: *wikipedia_project
    /{domain:te.wikipedia.org}: *wikipedia_project
    /{domain:vls.wikipedia.org}: *wikipedia_project
    /{domain:lbe.wikipedia.org}: *wikipedia_project
    /{domain:hak.wikipedia.org}: *wikipedia_project
    /{domain:iu.wikipedia.org}: *wikipedia_project
    /{domain:udm.wikipedia.org}: *wikipedia_project
    /{domain:bug.wikipedia.org}: *wikipedia_project
    /{domain:pap.wikipedia.org}: *wikipedia_project
    /{domain:tet.wikipedia.org}: *wikipedia_project
    /{domain:hu.wikipedia.org}: *wikipedia_project
    /{domain:tcy.wikipedia.org}: *wikipedia_project
    /{domain:crh.wikipedia.org}: *wikipedia_project
    /{domain:xal.wikipedia.org}: *wikipedia_project
    /{domain:nrm.wikipedia.org}: *wikipedia_project
    /{domain:dty.wikipedia.org}: *wikipedia_project
    /{domain:kn.wikipedia.org}: *wikipedia_project
    /{domain:os.wikipedia.org}: *wikipedia_project
    /{domain:olo.wikipedia.org}: *wikipedia_project
    /{domain:lrc.wikipedia.org}: *wikipedia_project
    /{domain:kl.wikipedia.org}: *wikipedia_project
    /{domain:tpi.wikipedia.org}: *wikipedia_project
    /{domain:tum.wikipedia.org}: *wikipedia_project
    /{domain:za.wikipedia.org}: *wikipedia_project
    /{domain:ay.wikipedia.org}: *wikipedia_project
    /{domain:ti.wikipedia.org}: *wikipedia_project
    /{domain:sc.wikipedia.org}: *wikipedia_project
    /{domain:ja.wikipedia.org}: *wikipedia_project
    /{domain:so.wikipedia.org}: *wikipedia_project
    /{domain:yo.wikipedia.org}: *wikipedia_project
    /{domain:gv.wikipedia.org}: *wikipedia_project
    /{domain:sw.wikipedia.org}: *wikipedia_project
    /{domain:he.wikipedia.org}: *wikipedia_project
    /{domain:zh.wikipedia.org}: *wikipedia_project
    /{domain:ve.wikipedia.org}: *wikipedia_project
    /{domain:arc.wikipedia.org}: *wikipedia_project
    /{domain:ksh.wikipedia.org}: *wikipedia_project
    /{domain:ab.wikipedia.org}: *wikipedia_project
    /{domain:tt.wikipedia.org}: *wikipedia_project
    /{domain:lez.wikipedia.org}: *wikipedia_project
    /{domain:la.wikipedia.org}: *wikipedia_project
    /{domain:nl.wikipedia.org}: *wikipedia_project
    /{domain:ms.wikipedia.org}: *wikipedia_project
    /{domain:frp.wikipedia.org}: *wikipedia_project
    /{domain:lg.wikipedia.org}: *wikipedia_project
    /{domain:cv.wikipedia.org}: *wikipedia_project
    /{domain:fiu-vro.wikipedia.org}: *wikipedia_project
    /{domain:ext.wikipedia.org}: *wikipedia_project
    /{domain:vi.wikipedia.org}: *wikipedia_project
    /{domain:io.wikipedia.org}: *wikipedia_project
    /{domain:ba.wikipedia.org}: *wikipedia_project
    /{domain:ka.wikipedia.org}: *wikipedia_project
    /{domain:cu.wikipedia.org}: *wikipedia_project
    /{domain:tn.wikipedia.org}: *wikipedia_project
    /{domain:als.wikipedia.org}: *wikipedia_project
    /{domain:din.wikipedia.org}: *wikipedia_project
    /{domain:lfn.wikipedia.org}: *wikipedia_project
    /{domain:ast.wikipedia.org}: *wikipedia_project
    /{domain:ltg.wikipedia.org}: *wikipedia_project
    /{domain:zea.wikipedia.org}: *wikipedia_project
    /{domain:haw.wikipedia.org}: *wikipedia_project
    /{domain:chr.wikipedia.org}: *wikipedia_project
    /{domain:bm.wikipedia.org}: *wikipedia_project
    /{domain:co.wikipedia.org}: *wikipedia_project
    /{domain:ff.wikipedia.org}: *wikipedia_project
    /{domain:cy.wikipedia.org}: *wikipedia_project
    /{domain:sco.wikipedia.org}: *wikipedia_project
    /{domain:hi.wikipedia.org}: *wikipedia_project
    /{domain:dv.wikipedia.org}: *wikipedia_project
    /{domain:shn.wikipedia.org}: *wikipedia_project
    /{domain:ml.wikipedia.org}: *wikipedia_project
    /{domain:sm.wikipedia.org}: *wikipedia_project
    /{domain:sl.wikipedia.org}: *wikipedia_project
    /{domain:ru.wikipedia.org}: *wikipedia_project
    /{domain:gom.wikipedia.org}: *wikipedia_project
    /{domain:id.wikipedia.org}: *wikipedia_project
    /{domain:roa-rup.wikipedia.org}: *wikipedia_project
    /{domain:bn.wikipedia.org}: *wikipedia_project
    /{domain:nso.wikipedia.org}: *wikipedia_project
    /{domain:pnb.wikipedia.org}: *wikipedia_project
    /{domain:myv.wikipedia.org}: *wikipedia_project
    /{domain:et.wikipedia.org}: *wikipedia_project
    /{domain:az.wikipedia.org}: *wikipedia_project
    /{domain:pt.wikipedia.org}: *wikipedia_project
    /{domain:lv.wikipedia.org}: *wikipedia_project
    /{domain:bh.wikipedia.org}: *wikipedia_project
    /{domain:ig.wikipedia.org}: *wikipedia_project
    /{domain:it.wikipedia.org}: *wikipedia_project
    /{domain:mn.wikipedia.org}: *wikipedia_project
    /{domain:pam.wikipedia.org}: *wikipedia_project
    /{domain:vo.wikipedia.org}: *wikipedia_project
    /{domain:yi.wikipedia.org}: *wikipedia_project
    /{domain:eo.wikipedia.org}: *wikipedia_project
    /{domain:oc.wikipedia.org}: *wikipedia_project
    /{domain:gor.wikipedia.org}: *wikipedia_project
    /{domain:nds-nl.wikipedia.org}: *wikipedia_project
    /{domain:got.wikipedia.org}: *wikipedia_project
    /{domain:bs.wikipedia.org}: *wikipedia_project
    /{domain:ik.wikipedia.org}: *wikipedia_project
    /{domain:ee.wikipedia.org}: *wikipedia_project
    /{domain:li.wikipedia.org}: *wikipedia_project
    /{domain:mzn.wikipedia.org}: *wikipedia_project
    /{domain:rn.wikipedia.org}: *wikipedia_project
    /{domain:sr.wikipedia.org}: *wikipedia_project
    /{domain:nah.wikipedia.org}: *wikipedia_project
    /{domain:sk.wikipedia.org}: *wikipedia_project
    /{domain:lt.wikipedia.org}: *wikipedia_project
    /{domain:koi.wikipedia.org}: *wikipedia_project
    /{domain:km.wikipedia.org}: *wikipedia_project
    /{domain:fr.wikipedia.org}: *wikipedia_project
    /{domain:tr.wikipedia.org}: *wikipedia_project
    /{domain:se.wikipedia.org}: *wikipedia_project
    /{domain:inh.wikipedia.org}: *wikipedia_project
    /{domain:bo.wikipedia.org}: *wikipedia_project
    /{domain:diq.wikipedia.org}: *wikipedia_project
    /{domain:gl.wikipedia.org}: *wikipedia_project
    /{domain:sq.wikipedia.org}: *wikipedia_project
    /{domain:pa.wikipedia.org}: *wikipedia_project
    /{domain:glk.wikipedia.org}: *wikipedia_project
    /{domain:pnt.wikipedia.org}: *wikipedia_project
    /{domain:cs.wikipedia.org}: *wikipedia_project
    /{domain:ta.wikipedia.org}: *wikipedia_project
    /{domain:sa.wikipedia.org}: *wikipedia_project
    /{domain:lo.wikipedia.org}: *wikipedia_project
    /{domain:kg.wikipedia.org}: *wikipedia_project
    /{domain:cbk-zam.wikipedia.org}: *wikipedia_project
    /{domain:frr.wikipedia.org}: *wikipedia_project
    /{domain:ban.wikipedia.org}: *wikipedia_project
    /{domain:bar.wikipedia.org}: *wikipedia_project
    /{domain:kk.wikipedia.org}: *wikipedia_project
    /{domain:kbd.wikipedia.org}: *wikipedia_project
    /{domain:stq.wikipedia.org}: *wikipedia_project
    /{domain:pi.wikipedia.org}: *wikipedia_project
    /{domain:kv.wikipedia.org}: *wikipedia_project
    /{domain:wuu.wikipedia.org}: *wikipedia_project
    /{domain:ne.wikipedia.org}: *wikipedia_project
    /{domain:zh-classical.wikipedia.org}: *wikipedia_project
    /{domain:lmo.wikipedia.org}: *wikipedia_project
    /{domain:br.wikipedia.org}: *wikipedia_project
    /{domain:el.wikipedia.org}: *wikipedia_project
    /{domain:ch.wikipedia.org}: *wikipedia_project
    /{domain:bjn.wikipedia.org}: *wikipedia_project
    /{domain:pdc.wikipedia.org}: *wikipedia_project
    /{domain:ckb.wikipedia.org}: *wikipedia_project
    /{domain:nqo.wikipedia.org}: *wikipedia_project
    /{domain:nov.wikipedia.org}: *wikipedia_project
    /{domain:no.wikipedia.org}: *wikipedia_project
    /{domain:am.wikipedia.org}: *wikipedia_project
    /{domain:xmf.wikipedia.org}: *wikipedia_project
    /{domain:mdf.wikipedia.org}: *wikipedia_project
    /{domain:rw.wikipedia.org}: *wikipedia_project
    /{domain:ln.wikipedia.org}: *wikipedia_project
    /{domain:jbo.wikipedia.org}: *wikipedia_project
    /{domain:sv.wikipedia.org}: *wikipedia_project
    /{domain:be.wikipedia.org}: *wikipedia_project
    /{domain:hsb.wikipedia.org}: *wikipedia_project
    /{domain:hr.wikipedia.org}: *wikipedia_project
    /{domain:st.wikipedia.org}: *wikipedia_project
    /{domain:ki.wikipedia.org}: *wikipedia_project
    /{domain:nostalgia.wikipedia.org}: *wikipedia_project
    /{domain:mg.wikipedia.org}: *wikipedia_project
    /{domain:ar.wikipedia.org}: *wikipedia_project
    /{domain:es.wikipedia.org}: *wikipedia_project
    /{domain:zh-yue.wikipedia.org}: *wikipedia_project
    /{domain:qu.wikipedia.org}: *wikipedia_project
    /{domain:th.wikipedia.org}: *wikipedia_project
    /{domain:si.wikipedia.org}: *wikipedia_project

    # Specials
    /{domain:www.wikidata.org}: *wikidata_project
    /{domain:beta.wikiversity.org}: *default_project
    /{domain:wikisource.org}: *default_project
    /{domain:www.mediawiki.org}: *default_project
    /{domain:test.wikidata.org}: *wikidata_project

    # Wikivoyage
    /{domain:bn.wikivoyage.org}: *wikivoyage_project
    /{domain:ro.wikivoyage.org}: *wikivoyage_project
    /{domain:pl.wikivoyage.org}: *wikivoyage_project
    /{domain:it.wikivoyage.org}: *wikivoyage_project
    /{domain:fr.wikivoyage.org}: *wikivoyage_project
    /{domain:ps.wikivoyage.org}: *wikivoyage_project
    /{domain:ru.wikivoyage.org}: *wikivoyage_project
    /{domain:nl.wikivoyage.org}: *wikivoyage_project
    /{domain:de.wikivoyage.org}: *wikivoyage_project
    /{domain:he.wikivoyage.org}: *wikivoyage_project
    /{domain:en.wikivoyage.org}: *wikivoyage_project
    /{domain:pt.wikivoyage.org}: *wikivoyage_project
    /{domain:vi.wikivoyage.org}: *wikivoyage_project
    /{domain:es.wikivoyage.org}: *wikivoyage_project
    /{domain:sv.wikivoyage.org}: *wikivoyage_project
    /{domain:el.wikivoyage.org}: *wikivoyage_project
    /{domain:hi.wikivoyage.org}: *wikivoyage_project
    /{domain:uk.wikivoyage.org}: *wikivoyage_project
    /{domain:fi.wikivoyage.org}: *wikivoyage_project
    /{domain:zh.wikivoyage.org}: *wikivoyage_project
    /{domain:fa.wikivoyage.org}: *wikivoyage_project

    # Wikisource
    /{domain:hr.wikisource.org}: *default_project
    /{domain:uk.wikisource.org}: *default_project
    /{domain:vec.wikisource.org}: *default_project
    /{domain:hi.wikisource.org}: *default_project
    /{domain:pt.wikisource.org}: *default_project
    /{domain:hy.wikisource.org}: *default_project
    /{domain:fr.wikisource.org}: *default_project
    /{domain:ca.wikisource.org}: *default_project
    /{domain:ja.wikisource.org}: *default_project
    /{domain:la.wikisource.org}: *default_project
    /{domain:yi.wikisource.org}: *default_project
    /{domain:da.wikisource.org}: *default_project
    /{domain:kn.wikisource.org}: *default_project
    /{domain:ar.wikisource.org}: *default_project
    /{domain:el.wikisource.org}: *default_project
    /{domain:ta.wikisource.org}: *default_project
    /{domain:or.wikisource.org}: *default_project
    /{domain:gl.wikisource.org}: *default_project
    /{domain:ml.wikisource.org}: *default_project
    /{domain:cy.wikisource.org}: *default_project
    /{domain:en.wikisource.org}: *default_project
    /{domain:sv.wikisource.org}: *default_project
    /{domain:de.wikisource.org}: *default_project
    /{domain:br.wikisource.org}: *default_project
    /{domain:et.wikisource.org}: *default_project
    /{domain:mr.wikisource.org}: *default_project
    /{domain:gu.wikisource.org}: *default_project
    /{domain:pa.wikisource.org}: *default_project
    /{domain:fo.wikisource.org}: *default_project
    /{domain:eo.wikisource.org}: *default_project
    /{domain:eu.wikisource.org}: *default_project
    /{domain:ro.wikisource.org}: *default_project
    /{domain:vi.wikisource.org}: *default_project
    /{domain:lt.wikisource.org}: *default_project
    /{domain:zh-min-nan.wikisource.org}: *default_project
    /{domain:it.wikisource.org}: *default_project
    /{domain:hu.wikisource.org}: *default_project
    /{domain:sk.wikisource.org}: *default_project
    /{domain:pl.wikisource.org}: *default_project
    /{domain:be.wikisource.org}: *default_project
    /{domain:bg.wikisource.org}: *default_project
    /{domain:ko.wikisource.org}: *default_project
    /{domain:li.wikisource.org}: *default_project
    /{domain:fi.wikisource.org}: *default_project
    /{domain:is.wikisource.org}: *default_project
    /{domain:zh.wikisource.org}: *default_project
    /{domain:no.wikisource.org}: *default_project
    /{domain:fa.wikisource.org}: *default_project
    /{domain:sa.wikisource.org}: *default_project
    /{domain:th.wikisource.org}: *default_project
    /{domain:bs.wikisource.org}: *default_project
    /{domain:az.wikisource.org}: *default_project
    /{domain:sr.wikisource.org}: *default_project
    /{domain:nl.wikisource.org}: *default_project
    /{domain:as.wikisource.org}: *default_project
    /{domain:mk.wikisource.org}: *default_project
    /{domain:tr.wikisource.org}: *default_project
    /{domain:sl.wikisource.org}: *default_project
    /{domain:nap.wikisource.org}: *default_project
    /{domain:sah.wikisource.org}: *default_project
    /{domain:es.wikisource.org}: *default_project
    /{domain:ru.wikisource.org}: *default_project
    /{domain:he.wikisource.org}: *default_project
    /{domain:bn.wikisource.org}: *default_project
    /{domain:id.wikisource.org}: *default_project
    /{domain:cs.wikisource.org}: *default_project
    /{domain:te.wikisource.org}: *default_project
    /{domain:pms.wikisource.org}: *default_project

    # Wikiversity
    /{domain:fr.wikiversity.org}: *default_project
    /{domain:de.wikiversity.org}: *default_project
    /{domain:sv.wikiversity.org}: *default_project
    /{domain:es.wikiversity.org}: *default_project
    /{domain:fi.wikiversity.org}: *default_project
    /{domain:hi.wikiversity.org}: *default_project
    /{domain:el.wikiversity.org}: *default_project
    /{domain:en.wikiversity.org}: *default_project
    /{domain:zh.wikiversity.org}: *default_project
    /{domain:it.wikiversity.org}: *default_project
    /{domain:ar.wikiversity.org}: *default_project
    /{domain:ko.wikiversity.org}: *default_project
    /{domain:ja.wikiversity.org}: *default_project
    /{domain:pt.wikiversity.org}: *default_project
    /{domain:cs.wikiversity.org}: *default_project
    /{domain:ru.wikiversity.org}: *default_project
    /{domain:sl.wikiversity.org}: *default_project

    # Wikibooks
    /{domain:sl.wikibooks.org}: *default_project
    /{domain:ca.wikibooks.org}: *default_project
    /{domain:li.wikibooks.org}: *default_project
    /{domain:gl.wikibooks.org}: *default_project
    /{domain:fr.wikibooks.org}: *default_project
    /{domain:ku.wikibooks.org}: *default_project
    /{domain:ja.wikibooks.org}: *default_project
    /{domain:tt.wikibooks.org}: *default_project
    /{domain:te.wikibooks.org}: *default_project
    /{domain:ka.wikibooks.org}: *default_project
    /{domain:kk.wikibooks.org}: *default_project
    /{domain:sv.wikibooks.org}: *default_project
    /{domain:si.wikibooks.org}: *default_project
    /{domain:mk.wikibooks.org}: *default_project
    /{domain:hy.wikibooks.org}: *default_project
    /{domain:ur.wikibooks.org}: *default_project
    /{domain:eu.wikibooks.org}: *default_project
    /{domain:pl.wikibooks.org}: *default_project
    /{domain:oc.wikibooks.org}: *default_project
    /{domain:zh.wikibooks.org}: *default_project
    /{domain:ta.wikibooks.org}: *default_project
    /{domain:th.wikibooks.org}: *default_project
    /{domain:bs.wikibooks.org}: *default_project
    /{domain:cs.wikibooks.org}: *default_project
    /{domain:cv.wikibooks.org}: *default_project
    /{domain:et.wikibooks.org}: *default_project
    /{domain:fa.wikibooks.org}: *default_project
    /{domain:la.wikibooks.org}: *default_project
    /{domain:pa.wikibooks.org}: *default_project
    /{domain:sr.wikibooks.org}: *default_project
    /{domain:lt.wikibooks.org}: *default_project
    /{domain:mr.wikibooks.org}: *default_project
    /{domain:en.wikibooks.org}: *default_project
    /{domain:tg.wikibooks.org}: *default_project
    /{domain:is.wikibooks.org}: *default_project
    /{domain:az.wikibooks.org}: *default_project
    /{domain:ko.wikibooks.org}: *default_project
    /{domain:hr.wikibooks.org}: *default_project
    /{domain:hi.wikibooks.org}: *default_project
    /{domain:vi.wikibooks.org}: *default_project
    /{domain:ba.wikibooks.org}: *default_project
    /{domain:uk.wikibooks.org}: *default_project
    /{domain:el.wikibooks.org}: *default_project
    /{domain:fi.wikibooks.org}: *default_project
    /{domain:da.wikibooks.org}: *default_project
    /{domain:ro.wikibooks.org}: *default_project
    /{domain:hu.wikibooks.org}: *default_project
    /{domain:mg.wikibooks.org}: *default_project
    /{domain:tl.wikibooks.org}: *default_project
    /{domain:es.wikibooks.org}: *default_project
    /{domain:ru.wikibooks.org}: *default_project
    /{domain:km.wikibooks.org}: *default_project
    /{domain:bg.wikibooks.org}: *default_project
    /{domain:bn.wikibooks.org}: *default_project
    /{domain:pt.wikibooks.org}: *default_project
    /{domain:tr.wikibooks.org}: *default_project
    /{domain:eo.wikibooks.org}: *default_project
    /{domain:af.wikibooks.org}: *default_project
    /{domain:ms.wikibooks.org}: *default_project
    /{domain:it.wikibooks.org}: *default_project
    /{domain:ar.wikibooks.org}: *default_project
    /{domain:fy.wikibooks.org}: *default_project
    /{domain:be.wikibooks.org}: *default_project
    /{domain:cy.wikibooks.org}: *default_project
    /{domain:ia.wikibooks.org}: *default_project
    /{domain:id.wikibooks.org}: *default_project
    /{domain:sq.wikibooks.org}: *default_project
    /{domain:sk.wikibooks.org}: *default_project
    /{domain:no.wikibooks.org}: *default_project
    /{domain:ne.wikibooks.org}: *default_project
    /{domain:ky.wikibooks.org}: *default_project
    /{domain:nl.wikibooks.org}: *default_project
    /{domain:ml.wikibooks.org}: *default_project
    /{domain:sa.wikibooks.org}: *default_project
    /{domain:he.wikibooks.org}: *default_project
    /{domain:de.wikibooks.org}: *default_project

    # global domain
    /{domain:wikimedia.org}: *wikimedia_project

    # A robots.txt to make sure that the content isn't indexed.
    /robots.txt:
      get:
        x-request-handler:
          - static:
              return:
                status: 200
                headers:
                  content-type: text/plain
                body: |
                  User-agent: *
                  Allow: /*/v1/?doc
                  Disallow: /

services:
  - name: restrouter
    module: hyperswitch
    conf:
      port: {{ .Values.main_app.port }}
      skip_resources: true
      spec: *root_spec
      salt: "{{ .Values.main_app.salt }}"
      default_page_size: 250
      user_agent: RESTRouter/WMF
      ui_name: REST API
      ui_url: https://www.mediawiki.org/wiki/RESTBase
      ui_title: REST API Documentation
{{- end -}}
