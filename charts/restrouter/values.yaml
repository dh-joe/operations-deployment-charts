# Default values for restrouter.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
helm_scaffold_version: 0.1 # This can be useful when backporting fixes.
docker:
  registry: docker-registry.wikimedia.org
  pull_policy: IfNotPresent
resources:
  replicas: 1
affinity: {}
tolerations: {}
main_app:
  image: wikimedia/restrouter
  version: latest # we use latest everywhere in the defaults.
  requests:
    cpu: 1600m
    memory: 800Mi
  limits:
    # Can consume a full core per worker. With 2 workers - 2 cores.
    cpu: 2
    # Service-Runner kills it when 700Mi is per worker is reached.
    # We're running 2 workers, plus a little room
    memory: 1500Mi
  liveness_probe:
    tcpSocket:
      port: 7231
  readiness_probe:
    httpGet:
      path: /en.wikipedia.org/v1/?spec
      port: 7231
  # service-related config values
  port: 7231
  salt: secret
  mwapi_uri: http://localhost/w/api.php
  restbase_uri: http://localhost:7233
  parsoid_uri: https://parsoid-beta.wmflabs.org
  graphoid_uri: https://graphoid-beta.wmflabs.org
  mathoid_uri: https://mathoid-beta.wmflabs.org
  mobileapps_uri: https://mobileapps.wmflabs.org
  wikifeeds_uri: http://wikifeeds.wmflabs.org
  citoid_uri: https://citoid-beta.wmflabs.org
  recommendation_uri: https://recommendation-api-beta.wmflabs.org
  event_service_uri: http://localhost:32192/v1/events
  pdfrender_uri: https://pdfrender-beta.wmflabs.org
  pdfrender_key: secret
  proton_uri: https://proton-beta.wmflabs.org
  cxserver_uri: https://cxserver-beta.wmflabs.org
  aqs_uri: https://wikimedia.org/api/rest_v1/metrics

monitoring:
  enabled: false
  image_version: latest
service:
  deployment: minikube # valid values are "production" and "minikube"
  port: null # you need to define this if "production" is used. In minikube environments let it autoallocate
config:
  public: {} # Add here all the keys that can be publicly available as a ConfigMap
  private: {} # Add here all the keys that should be private but still available as env variables
