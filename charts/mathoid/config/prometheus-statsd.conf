# Note: statsd timer metrics are millisecond based, but prometheus-statsd-exporter makes them
# second based to conform to prometheus, so all metrics are divided by 1000
mappings:
  - match: '*.gc.*'
    name: service_runner_gc_microseconds
    timer_type: histogram
    buckets: [ 5e+2, 1e+3, 5e+3, 10e+3, 15e+3, 30e+3, 50e+3 ]
    labels:
      service: $1
      event: $2

  - match: '*.heap.*'
    # service-runner abuses timer for heap data
    name: service_runner_${2}_heap_kilobytes
    timer_type: histogram
    buckets: [1e+3, 1e+4, 1e+5, 1e+6, 1e+7]
    labels:
      service: $1

  - match: '^mathoid\.(.*)\.([A-Z].*)\.([0-9A][0-9Lx][0-9Lx])$'
    match_type: regex
    name: mathoid_requests_duration
    labels:
      uri: $1
      method: $2
      status: $3
