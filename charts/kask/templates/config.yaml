{{- define "config.app" -}}
#
base_uri: {{ .Values.main_app.base_uri }}
cassandra:
{{- if hasKey .Values.main_app.cassandra "hostname" }}
{{ toYaml .Values.main_app.cassandra | indent 2 }}
{{- else }}
{{- $hostname := printf "%s-%s.%s.%s" .Release.Name "cassandra" .Release.Namespace "svc.cluster.local" -}}
{{- $cassandra := set .Values.main_app.cassandra "hostname" $hostname -}}
{{ toYaml $cassandra | indent 2 }}
{{- end }}
default_ttl: {{ .Values.main_app.default_ttl }}
listen_address: {{ .Values.main_app.listen_address }}
listen_port: {{ .Values.main_app.port }}
service_name: {{ .Values.main_app.service_name }}
log_level: {{ .Values.main_app.log_level }}
{{- if .Values.main_app.openapi_spec }}
openapi_spec: {{ .Values.main_app.openapi_spec }}
{{- end -}}
{{- if .Values.main_app.tls }}
tls: {{ .Values.main_app.tls }}
{{- end -}}
{{- end -}}
