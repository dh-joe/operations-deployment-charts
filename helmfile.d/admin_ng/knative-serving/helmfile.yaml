releases:
  - name: knative-serving-crds
    namespace: knative-serving
    chart: wmf-stable/knative-serving-crds
    missingFileHandler: Warn
  - name: knative-serving
    namespace: knative-serving                                                 # NOTE: The namespace is hardcoded in multiple charts.
    chart: wmf-stable/knative-serving
    missingFileHandler: Warn
    needs:
      - knative-serving/knative-serving-crds
    values:
      - "values/common.yaml"                                                   # Generic default values for all environments
      - "values/{{ .Values.cluster_group }}.yaml"                              # Default values for this cluster group
      - "values/{{ .Environment.Name }}/values.yaml"                           # Environment specific defaults
      - "{{`{{ .Release.Name }}`}}/values.yaml"                                # Release specific overrides
      - "values/{{ .Environment.Name }}/{{`{{ .Release.Name }}`}}-values.yaml" # Overrides specific to release in environment
      - "/etc/helmfile-defaults/private/admin/{{ .Environment.Name }}.yaml"    # Secrets (from private puppet repo)
