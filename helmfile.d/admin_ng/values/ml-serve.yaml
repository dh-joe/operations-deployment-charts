# cluster_group is used to identify a group of similar clusters (like for one in eqiad and one in codfw)
# that share some config (values) in "admin_ng/values/<cluster_group>.yaml"
cluster_group: ml-serve

# Defaults applied to all ML clusters

# No default network policies
GlobalNetworkPolicies: {}

# No namespaces
namespaces:
  knative-serving: {}

net_istio:
  ingressgateway:
    servers:
    - port:
        number: 80
        name: http
        protocol: HTTP
      hosts:
        - '*'
    - hosts:
        - 'inference.discovery.wmnet'
      port:
        name: https
        number: 443
        protocol: HTTPS
      tls:
        mode: SIMPLE
        # Please note:
        # This corresponds to the name of a TLS Secret deployed
        # to the istio-system namespace. We do it via the 'secrets' chart
        # in the knative-serving helmfile config (the chart is a dependency).
        credentialName: inference-tls-cert
  controller:
    image: knative-net-istio-controller
    version: 0.18.1-3
  webhook:
    image: knative-net-istio-webhook
    version: 0.18.1-3

core:
  queue_proxy:
    image: knative-serving-queue
    version: 0.18.1-4
  activator:
    image: knative-serving-activator
    version: 0.18.1-3
  autoscaler:
    image: knative-serving-autoscaler
    version: 0.18.1-3
  controller:
    image: knative-serving-controller
    version: 0.18.1-4
  webhook:
    image: knative-serving-webhook
    version: 0.18.1-3
