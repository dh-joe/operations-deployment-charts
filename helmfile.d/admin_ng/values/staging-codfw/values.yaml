kubernetesVersion: "1.23"

# Install latest version of these charts
chartVersions:
  wmf-stable/calico: ~

# check out documentation to understand this well
# https://v1-12.docs.kubernetes.io/docs/tasks/administer-cluster/manage-resources/quota-memory-cpu-namespace/
# Allow only up to 3 replicas to safeguard the staging cluster
resourcequota:
  pods: {}
  compute:
    requests:
      cpu: "20"
      memory: "10Gi"
    limits:
      cpu: "20"
      memory: "10Gi"

namespaces:
  flink-operator:
    systemNamespace: true
  ci:
    deployUser: jenkins
    deployClusterRole: deploy-flink
    resourcequota:
      pods: {}
      compute:
        requests:
          cpu: "20"
          memory: "20Gi"
        limits:
          cpu: "20"
          memory: "20Gi"
  # Redefine these specifically for staging. Main clusters are increasing
  # these, but we don't want that for now on the staging ones
  changeprop-jobqueue:
    resourcequota:
      pods: {}
      compute:
        requests:
          cpu: "20"
          memory: "20Gi"
        limits:
          cpu: "20"
          memory: "20Gi"
  # TODO: Move this to main.yaml when we deploy to eqiad/codfw.
  # https://phabricator.wikimedia.org/T325303
  mediawiki-page-content-change-enrichment: {}
  mobileapps:
    resourcequota:
      pods: {}
      compute:
        requests:
          cpu: "20"
          memory: "20Gi"
        limits:
          cpu: "20"
          memory: "20Gi"
  mw-web:
    resourcequota:
      pods: {}
      compute:
        requests:
          cpu: "20"
          memory: "20Gi"
        limits:
          cpu: "20"
          memory: "20Gi"
  machinetranslation:
    limitranges:
      container:
        min:
          memory: "100Mi"
          cpu: "100m"
        max:
          memory: "32Gi"
          cpu: "8"
        defaultRequest:
          memory: "100Mi"
          cpu: "100m"
        default:
          memory: "100Mi"
          cpu: "100m"
      pod:
        min:
          memory: "100Mi"
          cpu: "100m"
        max:
          memory: "33Gi"
          cpu: "9"
    resourcequota:
      pods: {}
      compute:
        requests:
          cpu: "20"
          memory: "34Gi"
        limits:
          cpu: "20"
          memory: "34Gi"

kubernetesMasters:
  cidrs:
    - "10.192.48.10/32"
    - "2620:0:860:104:10:192:48:10/128"
