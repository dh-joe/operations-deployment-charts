kubernetesMasters:
  cidrs:
    - '10.192.16.93/32'
    - '2620:0:860:102:10:192:16:93/128'
    - '10.192.48.64/32'
    - '2620:0:860:104:10:192:48:64/128'
# Override policies from ../ml-serve.yaml
GlobalNetworkPolicies:
  allow-pod-to-pod:
    egress:
      - action: Allow
        destination:
          nets:
            # codfw
            - "10.194.61.0/24"
      - action: Allow
        destination:
          nets:
            # codfw
            - "2620:0:860:302::/64"

# Override DNS name on certs to refer to staging endpoint
namespaces:
  knative-serving:
    # Note: We rely on ChangeProp to call LiftWing upon certain
    # Kafka events are emitted. Due to how nodejs works
    # (see https://github.com/nodejs/node/issues/37104) it is
    # not possible to call our inference endpoints with
    # custom HTTP Host headers, unless there are some special
    # SANs in the TLS certificate to support them.
    tlsHostnames:
      - inference-staging

limitranges:
  container:
    max:
      memory: "6Gi"
  pod:
    max:
      memory: "8Gi"

# Upgrade to k8s 1.23 - T327767
kubernetesVersion: "1.23"
# Install latest version of these charts
chartVersions:
  wmf-stable/calico-crds: ~
  wmf-stable/calico: ~
  wmf-stable/cert-manager: ~
  wmf-stable/cfssl-issuer-crds: ~
  wmf-stable/cfssl-issuer: ~
  wmf-stable/eventrouter: ~
  wmf-stable/coredns: ~
  wmf-stable/knative-serving-crds: ~
  wmf-stable/knative-serving: ~

istio:
  gateways:
    ingressgateway:
      ports:
        - 8443
