# DSE k8s cluster specific configuratrion.
# In DSE (development), use Kafka jumbo-eqiad cluster.
# When we move to wikikube, we will use Kafka main clusters.

kafka:
  allowed_clusters: [jumbo-eqiad]

networkpolicy:
  egress:
    enabled: true

app:
  config_files:
    # Will be rendered into /srv/conf/app.config.yaml by flink-app chart.
    app.config.yaml:

      # Configs for eventutilities python stream_manager.
      stream_manager:
        # Configure sources and sinks.
        source:
          options:
            bootstrap_servers: kafka-jumbo1001.eqiad.wmnet:9093,kafka-jumbo1002.eqiad.wmnet:9093,kafka-jumbo1003.eqiad.wmnet:9093,kafka-jumbo1004.eqiad.wmnet:9093,kafka-jumbo1005.eqiad.wmnet:9093,kafka-jumbo1006.eqiad.wmnet:9093,kafka-jumbo1007.eqiad.wmnet:9093,kafka-jumbo1008.eqiad.wmnet:9093,kafka-jumbo1009.eqiad.wmnet:9093
            properties:
              security.protocol: ssl
              ssl.ca.location: /etc/ssl/certs/wmf-ca-certificates.crt
        sink:
          options:
            bootstrap_servers: kafka-jumbo1001.eqiad.wmnet:9093,kafka-jumbo1002.eqiad.wmnet:9093,kafka-jumbo1003.eqiad.wmnet:9093,kafka-jumbo1004.eqiad.wmnet:9093,kafka-jumbo1005.eqiad.wmnet:9093,kafka-jumbo1006.eqiad.wmnet:9093,kafka-jumbo1007.eqiad.wmnet:9093,kafka-jumbo1008.eqiad.wmnet:9093,kafka-jumbo1009.eqiad.wmnet:9093
            # Override this in values.codfw.yaml
            kafka_topic_prefix: eqiad.
            properties:
              security.protocol: ssl
              ssl.ca.location: /etc/ssl/certs/wmf-ca-certificates.crt

