helm_scaffold_version: 0.1 # This can be useful when backporting fixes.
docker:
  registry: docker-registry.discovery.wmnet
  pull_policy: IfNotPresent
resources:
  replicas: 1
affinity: {}
tolerations: {}
main_app:
  image: wikimedia/restrouter
  version: v1.1.1
  port: 7231
  requests:
    cpu: 1600m
    memory: 800Mi
  limits:
    # Can consume a full core per worker. With 2 workers - 2 cores.
    cpu: 2
    # Service-Runner kills it when 700Mi is per worker is reached.
    # We're running 2 workers, plus a little room
    memory: 1500Mi
  liveness_probe:
    tcpSocket:
      port: 7231
  readiness_probe:
    httpGet:
      path: /en.wikipedia.org/v1/?spec
      port: 7231
  # service-related config values
  aqs_uri: http://aqs.svc.eqiad.wmnet:7232/analytics.wikimedia.org/v1
  citoid_uri: http://citoid.discovery.wmnet:1970
  cxserver_uri: http://cxserver.discovery.wmnet:8080
  event_service_uri: http://eventgate-main.discovery.wmnet:32192/v1/events
  graphoid_uri: http://graphoid.discovery.wmnet:19000
  mathoid_uri: http://mathoid.discovery.wmnet:10042
  mobileapps_uri: http://mobileapps.discovery.wmnet:8888
  wikifeeds_uri: http://wikifeeds.discovery.wmnet:8889
  parsoid_uri: http://parsoid.discovery.wmnet:8080
  proton_uri: http://proton.discovery.wmnet:24766
  recommendation_uri: http://recommendation-api.discovery.wmnet:9632
  restbase_uri: http://restbase.discovery.wmnet:7233

monitoring:
  enabled: true
  image_version: 0.0.5
service:
  deployment: production
  port: 7231
config:
  public: {} # Add here all the keys that can be publicly available as a ConfigMap
  private: {} # Add here all the keys that should be private but still available as env variables

