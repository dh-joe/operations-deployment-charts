main_app:
  image: restricted/mediawiki-multiversion
  version: production
  registry:  docker-registry.discovery.wmnet
  requests:
    cpu: 500m
    memory: 500Mi
  limits:
    cpu: 1000m
    memory: 1000Mi

service:
  deployment: production
  port:
    nodePort: 4444
resources:
  replicas: 1

tls:
  enabled: false
  public_port: 4444
monitoring:
  enabled: true

debug:
  enabled: false
  ports: []

networkpolicy:
  egress:
    enabled: true

# See the dockerfiles for the the php-fpm base image to know what can be tweaked.
# Those can be passed via config.public above.
php:
  fcgi_mode: FCGI_TCP
mw:
  domain_suffix: "local"
  httpd:
    image: mediawiki-webserver
    verision: latest
  mcrouter:
    enabled: true
    image_tag: mcrouter:latest
    exporter_version: latest
    pools:
    - name: eqiad-servers
      zone: eqiad
      servers: &eqiad_servers
        - 10.64.0.80
        - 10.64.0.81
        - 10.64.0.82
        - 10.64.0.83
        - 10.64.0.84
        - 10.64.16.108
        - 10.64.0.125
        - 10.64.16.109
        - 10.64.0.124
        - 10.64.32.208
        - 10.64.32.209
        - 10.64.32.210
        - 10.64.32.211
        - 10.64.32.212
        - 10.64.48.155
        - 10.64.48.156
        - 10.64.48.157
        - 10.64.48.158
      failover:
        - 10.64.0.53
        - 10.64.32.101
        - 10.64.48.32
    - name: codfw-proxies
      zone: codfw
      servers:
        - 10.192.0.169
        - 10.192.16.57
        - 10.192.32.115
        - 10.192.48.95
      failover:
        - 10.192.48.95
        - 10.192.32.115
        - 10.192.16.57
        - 10.192.0.169
  #TODO: add the codfw servers and the eqiad proxies
  nutcracker:
    enabled: true
    image_tag: nutcracker:latest
    exporter_version: latest
