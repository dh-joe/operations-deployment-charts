main_app:
  # override the image for testing in staging first
  image: repos/search-platform/flink-rdf-streaming-updater
  version: flink-1.16.1-rdf-0.3.124
  config:
    cluster_id: rdf-streaming-updater-staging-flink-cluster
# thanos is replicated between clusters so we want a separate bucket for
# the flink HA storage
    ha_storage_dir: s3://rdf-streaming-updater-staging/flink_ha_storage

task_manager:
  replicas: 2
  requests:
    cpu: 500m
    memory: 2048M
  limits:
    cpu: 1000m
    memory: 2048M

config:
  public:
    DISABLE_JEMALLOC: "true"

kafka:
  # unclear where staging is actually running so allow both kafka-main clusters
  # TODO: ideally we'd like to use a "test" cluster (test-eqiad?) but we need actual data and it's unclear if the test
  # cluster has some production data replicated to it
  allowed_clusters:
  - main-eqiad
  - main-codfw
