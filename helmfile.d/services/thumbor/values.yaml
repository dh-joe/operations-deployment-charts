resources:
  replicas: 2

monitoring:
  enabled: true

tls:
  enabled: false

discovery:
  listeners:
  - swift-eqiad
  - swift-codfw

main_app:

  version: 2022-10-11-135003-production

  # 4 workers per pod in production
  thumbor_ports: [8801, 8802, 8803, 8804]


networkpolicy:
  egress:
    enabled: true
    dst_nets:
      # poolcounter1004
      - cidr: 10.64.0.151/32
        ports:
          - protocol: TCP
            port: 7531
      # poolcounter1005
      - cidr: 10.64.32.236/32
        ports:
          - protocol: TCP
            port: 7531
      # poolcounter2003
      - cidr: 10.192.0.132/32
        ports:
          - protocol: TCP
            port: 7531
      # poolcounter2004
      - cidr: 10.192.16.129/32
        ports:
          - protocol: TCP
            port: 7531
      # thumbor1001 - memcached
      - cidr: 10.64.16.56/32
        ports:
          - protocol: TCP
            port: 11211
      # thumbor1002 - memcached
      - cidr: 10.64.16.57/32
        ports:
          - protocol: TCP
            port: 11211
      # thumbor1005 - memcached
      - cidr: 10.64.0.161/32
        ports:
          - protocol: TCP
            port: 11211
      # thumbor1006 - memcached
      - cidr: 10.64.32.149/32
        ports:
          - protocol: TCP
            port: 11211
      # thumbor2003 - memcached
      - cidr: 10.192.16.58/32
        ports:
          - protocol: TCP
            port: 11211
      # thumbor2004 - memcached
      - cidr: 10.192.16.59/32
        ports:
          - protocol: TCP
            port: 11211
      # thumbor2005 - memcached
      - cidr: 10.192.0.97/32
        ports:
          - protocol: TCP
            port: 11211
      # thumbor2006 - memcached
      - cidr: 10.192.48.62/32
        ports:
          - protocol: TCP
            port: 11211
