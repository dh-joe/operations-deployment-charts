# staging uses Kafka test-eqioad cluster for both source and sink.
# Because kafka test-eqiad doesn't have real mediawiki.page_change
# traffic, it won't really be doing any work.
kafka:
  allowed_clusters: [test-eqiad]

app:
  config_files:
    app.config.yaml:

      # Configs for eventutilities python stream_manager.
      stream_manager:
        # Configure sources and sinks.
        source:
          options:
            # TODO enable TLS on port 9092
            bootstrap_servers: kafka-test1006.eqiad.wmnet:9093,kafka-test1007.eqiad.wmnet:9093,kafka-test1008.eqiad.wmnet:9093,kafka-test1009.eqiad.wmnet:9093,kafka-test1010.eqiad.wmnet:9093
            properties:
              security.protocol: ssl
              ssl.ca.location: /etc/ssl/certs/wmf-ca-certificates.crt
        sink:
          options:
            kafka_topic_prefix: eqiad.
            bootstrap_servers: kafka-test1006.eqiad.wmnet:9093,kafka-test1007.eqiad.wmnet:9093,kafka-test1008.eqiad.wmnet:9093,kafka-test1009.eqiad.wmnet:9093,kafka-test1010.eqiad.wmnet:9093
            properties:
              security.protocol: ssl
              ssl.ca.location: /etc/ssl/certs/wmf-ca-certificates.crt


# TODO: when deploying to eqiad + codfw, we'll need to set
# higher resource limits for taskmanagers.
# See helmfile.d/dse-k8s-services/values-dse-k8s-eqiad.yaml.
