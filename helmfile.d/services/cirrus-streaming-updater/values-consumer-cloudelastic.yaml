app:
  image: docker-registry.discovery.wmnet/repos/search-platform/cirrus-streaming-updater/consumer
  job:
    entryClass: org.wikimedia.discovery.cirrus.updater.consumer.ConsumerApplication

  taskManager:
    # NOTE: taskManager.replicas takes precedence over job.parallelism.
    # To increase default job parellism, we can increase this
    # and/or flinkConfiguration.taskmanager.numberOfTaskSlots accordingly.
    replicas: 2
    resource:
      cpu: 2
      memory: 3Gb

  config_files:
    app.config.yaml:
      elasticsearch-bulk-flush-interval: 30s
      saneitize: true
      saneitize-capacity: 100
      saneitize-loop-duration: P14D
      saneitize-private-wikis: false
      saneitize-rerender-frequency: 8

mesh:
  concurrency: 2 # https://phabricator.wikimedia.org/T353460#9437962
  resources:
    requests:
      cpu: 1
    limits:
      cpu: 1
