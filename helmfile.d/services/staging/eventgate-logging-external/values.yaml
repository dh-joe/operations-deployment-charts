main_app:
  conf:
    # The request body is accepted as an array of events, each of which
    # will be an individual message in Kafka.  Each individual
    # message must be smaller than message.max.bytes, but EventGate
    # can accept multiple events at once in the request body.
    # Limit this to a smaller size for this externally accessible eventgate instance.
    max_body_size: 4mb
    kafka:
      conf:
        metadata.broker.list: logstash1010.eqiad.wmnet:9093,logstash1011.eqiad.wmnet:9093,logstash1012.eqiad.wmnet:9093
        # Enforce a smaller message size limit for this externally accessible eventgate instance.
        message.max.bytes: 1048576
        # Enable Kafka producer TLS (no authentication, just encryption).
        security.protocol: ssl
        ssl.ca.location: /etc/eventgate/kafka_ca.crt.pem
    schema_precache_uris:
    - /client/error/1.0.0
    topic_prefix: staging.
  stream_config:
    # TODO make more streams when used by other clients than Mediawiki client side JS.
    mediawiki.client.error:
      schema_title: client/error
  # This is the Puppet CA cert.
  kafka_ca_cert: |-
    -----BEGIN CERTIFICATE-----
    MIIFSjCCAzKgAwIBAgIBATANBgkqhkiG9w0BAQsFADArMSkwJwYDVQQDDCBQdXBw
    ZXQgQ0E6IHBhbGxhZGl1bS5lcWlhZC53bW5ldDAeFw0xNTA2MzAxOTM2MjlaFw0y
    MDA2MjkxOTM2MjlaMCsxKTAnBgNVBAMMIFB1cHBldCBDQTogcGFsbGFkaXVtLmVx
    aWFkLndtbmV0MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAwyLo2iAB
    RpBoyFHuJB89fWFADMdSqch4fFo+n8lXI/FMQHKyN+ZCw7d2Sv95E9pL7pUiWMDu
    Vz2W9vBWRRvcNRz+WaqvPTGKl5aPQe8Abcu35XCvCBCRCu3ASe0jJaFULexWsFo8
    yrPjbJuH5AhZZ0MFHUfculRGLUCJ134/rMKM9L/3/CK6Nc3Cup7TTokK/czSRmqT
    P/RioHExAifWbPD7FpknSmfsskveeraKJ1L7OA7O5dT9J/vJlUbrEqf8BcGaC7U0
    SRgnLIGPIchcjvUBbj2M5JN2z01nqQGck5uhNkLnZaD/VCNESNwN1ewClcNcIS1B
    lEIgQwrcG9GB4RwBFquA6Bypw8rLRBiTkKHYGRk+QoMjoM7/uaaQUDRezsPspVT7
    DLN0zEfJr6Xi8RuUTrqKZIuEDhxIl5r8CZphEF5JdVHR243C+zyuryRbdsHuWuqB
    3oPqkX384fAjeA80O1zkSrW0P9HUUrhVQirWbbjyJvRpu2KudE60y5LsYJ2MOssU
    lvd475+CSkCxbcZru1pMEngCpuCjEHZJe56PRvNZ97aGTW3MmNjqpKWj+du1F/54
    ervm2pMrXJtwvlhSUtXZ0KdSCGj2misv6azn5rJvhPQMZFiD7HEBRqWLh4uYDY8R
    O5kgs+S0kJC6aE/vIIB6tZ82MqBlet4CyV0CAwEAAaN5MHcwDwYDVR0TAQH/BAUw
    AwEB/zA1BglghkgBhvhCAQ0EKFB1cHBldCBSdWJ5L09wZW5TU0wgSW50ZXJuYWwg
    Q2VydGlmaWNhdGUwHQYDVR0OBBYEFFnkhjB+Aq8NAKZ07Zr2DheubK66MA4GA1Ud
    DwEB/wQEAwIBBjANBgkqhkiG9w0BAQsFAAOCAgEABa0riHHTnPz1e5WGpLZTjX3I
    NGRJh+SlWlbBmKxqqkNVm7chJckXErehYRLwOFFGNys4iL61wr5xYJM4jqy9fVt0
    0GzbC8gFM3qN0iHVcVp9aYSxJsmi81GIR569LrNSyyL3r9LRzRyFDd//TS8b7UMy
    CQveg9FUFFdJlJTFit/HXICudq98fMyiL36QIcBoJFmAI1kUCEVrWtFIfV91wVy0
    MwZz1x+jqEATjA7hZ9zNpIJxP6AIb4lZK0OX8GJnTNprGr8k6f5YZWN3ykUhDBCn
    DWI3lFxJhBsWdlCUGvrYFVYDO4gIpKjWLJ5eExu+u94YeCPTDprJLB1ClyWGnUrI
    wl1g2kxm9yqNEpakxzr4SsDv06IASr8jBx5f2zn/MNOk99jjF2Hx1S6wBBIDqFnK
    3VLZGNU/iQRBDvo6tfF11kQhGbYIfOt1R8dNxSeuUXBiyjVm8hZZMajJvwPPQpt6
    X8mAq+ydihHe4/T20dAxdReA2yP3IL5L1cbK5Aa0LU/ckGmHhg8lrrv/lTvDz4KZ
    n1Rzg0zOr07u9PYSzDMtFFMf0qrqLQ3KY4GJNAhg8TLAkQTpZZk+1/nZmiBG6H9q
    ar7DyLkvO1+I42W3Qsi34NISNdV1d0zery5wZ43DDhIdWO3x27mvNtqLODdKGSgZ
    Hv6CZq21bZOfTLBuO+c=
    -----END CERTIFICATE-----
  version: 2019-10-28-185106-production
service:
  deployment: production
  port: 33192
tls:
  enabled: true
  image_version: 1.11.2-1
  public_port: 43192 # the port where TLS will be exposed
