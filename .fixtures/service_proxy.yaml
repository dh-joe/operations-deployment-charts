---
services_proxy:
  parsoid-php:
    port: 6002
    timeout: 30s
    service: parsoid-php
    keepalive: 4s
    retry:
      retry_on: 5xx
      num_retries: 1
    xfp: https
    upstream: &1
      ips:
      - 127.0.0.1/32
      - 169.254.0.1/32
      address: mock.discovery.wmnet
      port: 443
      encryption: true
  mathoid:
    port: 6003
    timeout: 3s
    service: mathoid
    upstream: *1
  eventgate-analytics:
    port: 6004
    timeout: 10s
    service: eventgate-analytics
    keepalive: 4.5s
    retry:
      retry_on: 5xx
      num_retries: 1
    upstream: *1
  eventgate-main:
    port: 6005
    timeout: 61s
    service: eventgate-main
    keepalive: 4.5s
    retry:
      retry_on: 5xx
      num_retries: 2
      per_try_timeout: 20s
    upstream: *1
  sessionstore:
    port: 6006
    service: sessionstore
    timeout: 2.5s
    upstream: *1
  echostore:
    port: 6007
    service: echostore
    timeout: 2.5s
    upstream: *1
  termbox:
    port: 6008
    service: termbox
    keepalive: 4.5s
    retry:
      retry_on: 5xx
      num_retries: 2
    timeout: 25s
    upstream: *1
  wdqs-internal:
    port: 6009
    service: wdqs-internal
    timeout: 10s
    upstream: *1
  ores:
    port: 6010
    service: ores
    timeout: 10s
    upstream: *1
  restbase:
    port: 6011
    service: restbase-https
    upstream: *1
    timeout: 30s
    keepalive: 4s
    xfp: https
  push-notifications:
    port: 6012
    service: push-notifications
    keepalive: 4.5s
    timeout: 2.5s
    upstream: *1
  mobileapps:
    port: 6012
    service: mobileapps
    timeout: 120s
    upstream: *1
  eventgate-analytics-external:
    port: 6013
    timeout: 5s
    service: eventgate-analytics-external
    keepalive: 4.5s
    retry:
      retry_on: 5xx
      num_retries: 1
    upstream: *1
  proton:
    port: 6013
    service: proton
    timeout: 120s
    upstream: *1
  citoid:
    port: 6014
    service: citoid
    timeout: 120s
    keepalive: 4.5s
    upstream: *1
  cxserver:
    port: 6015
    service: cxserver
    timeout: 120s
    upstream: *1
  recommendation:
    port: 6016
    service: recommendation-api
    timeout: 120s
    upstream: *1
  wikifeeds:
    port: 6017
    service: wikifeeds
    timeout: 120s
    upstream: *1
  zotero:
    port: 6018
    service: zotero
    timeout: 120s
    keepalive: 4.5s
    upstream: *1
  apertium:
    port: 6019
    service: apertium
    timeout: 120s
    keepalive: 4.5s
    upstream: *1
  aqs:
    port: 6020
    service: aqs
    timeout: 120s
    upstream: *1
  thanos-query:
    port: 6021
    service: thanos-query
    timeout: 120s
    upstream: *1
  thanos-swift:
    port: 6022
    service: thanos-swift
    timeout: 120s
    upstream: *1
  schema:
    port: 6023
    service: schema
    timeout: 120s
    upstream: *1
  shellbox:
    port: 6024
    timeout: 60s
    service: shellbox
    keepalive: 4s
    upstream: *1
  shellbox-constraints:
    port: 6025
    timeout: 10s
    service: shellbox-constraints
    keepalive: 4s
    upstream: *1
  shellbox-media:
    port: 6026
    timeout: 60s
    service: shellbox-media
    keepalive: 4s
    upstream: *1
  shellbox-syntaxhighlight:
    port: 6027
    timeout: 60s
    service: shellbox-syntaxhighlight
    keepalive: 4s
    upstream: *1
  shellbox-timeline:
    port: 6028
    timeout: 60s
    service: shellbox-timeline
    keepalive: 4s
    upstream: *1
  linkrecommendation:
    port: 6029
    service: linkrecommendation
    timeout: 10s
    upstream: *1
  image-suggestion:
    port: 6030
    service: image-suggestion
    timeout: 10s
    keepalive: 4s
    uses_ingress: true
    upstream: *1
  inference:
    port: 6031
    service: inference
    timeout: 10s
    upstream: *1
  device-analytics:
    port: 6032
    service: device-analytics
    timeout: 10s
    keepalive: 4s
    upstream: *1
  rest-gateway:
    port: 6033
    service: rest-gateway
    timeout: 10s
    keepalive: 4s
    upstream: *1
  swift-eqiad:
    port: 6101
    service: swift-https
    timeout: 50s
    upstream: *1
  swift-codfw:
    port: 6201
    service: swift-https
    timeout: 50s
    upstream: *1
  search-chi-eqiad:
    port: 6102
    service: search-https
    timeout: 50s
    upstream: *1
  search-chi-codfw:
    port: 6202
    service: search-https
    timeout: 50s
    upstream: *1
  search-omega-eqiad:
    port: 6103
    service: search-omega-https
    timeout: 50s
    upstream: *1
  search-omega-codfw:
    port: 6203
    service: search-omega-https
    timeout: 50s
    upstream: *1
  search-psi-eqiad:
    port: 6104
    service: search-psi-https
    timeout: 50s
    upstream: *1
  cloudelastic-chi-eqiad:
    port: 6105
    service: cloudelastic-chi-https
    timeout: 50s
    upstream: *1
  cloudelastic-omega-eqiad:
    port: 6106
    service: cloudelastic-omega-https
    timeout: 50s
    upstream: *1
  cloudelastic-psi-eqiad:
    port: 6107
    service: cloudelastic-psi-https
    timeout: 50s
    upstream: *1
  search-psi-codfw:
    port: 6204
    service: search-psi-https
    timeout: 50s
    upstream: *1
  parsoid-async:
    port: 6502
    service: parsoid-php
    keepalive: 4s
    retry:
      retry_on: 5xx
      num_retries: 1
    xfp: https
    timeout: 120s
    upstream: *1
  mwapi-async:
    port: 6500
    service: api-https
    upstream: *1
    keepalive: 4s
    timeout: 120s
    xfp: https
  mwapi:
    port: 6501
    service: api-https
    upstream: *1
    keepalive: 4s
    timeout: 60s
    xfp: https
  mw-api-int-async:
    port: 6500
    service: mw-api-int
    upstream: *1
    keepalive: 4s
    timeout: 120s
    xfp: https
  mw-api-int:
    port: 6501
    service: mw-api-int
    upstream: *1
    keepalive: 4s
    timeout: 60s
    xfp: https
  restbase-for-services:
    port: 6503
    service: restbase-https
    timeout: 122s
    keepalive: 4s
    upstream: *1
    xfp: https
